/**
*swipeSlide移动端全屏滑动插件
*version: 1.0
*author: WISHES
*time: 2016/09/01
*qq:1527127028
*版权:转载使用需要保留头部信息！前端菜鸟，欢迎朋友拍砖指正！
**/
!function(e){e.fn.swipeSlide=function(t){var s={scale:.5,auto:!0,isTit:!0,index:0},i=e.extend({},s,t);this.each(function(){function t(){w=e(window).width(),l.height(w*i.scale),c.width(w*o.length),o.width(w).height(w*i.scale)}function s(e){"left"==e?(h>=o.length-1?(o.eq(0).css({position:"relative",left:w*o.length+"px"}),h=0):(h++,o.css({position:"static"})),g++,c.animate({left:-w*g},function(){g==o.length&&(o.eq(0).css({position:"static",left:0}),c.css({left:0}),g=0)})):"right"==e?(h<=0?h=o.length-1:(h--,o.css({position:"static"})),g--,c.animate({left:-w*g},function(){g==-1&&(o.eq(o.length-1).css({position:"static"}),c.css({left:-w*(o.length-1)}),g=o.length-1)})):"reset"==e&&(c.animate({left:-w*h}),o.css({position:"static"})),a(h)}function n(){0!=i.auto&&s("left")}function a(e){l.find(".circle em").eq(e).addClass("active").siblings().removeClass("active"),l.find(".title-box .title").html(o.eq(e).find("a").attr("title"))}for(var l=e(this),c=l.find("ul"),o=l.find("li"),h=i.index,d=null,g=i.index,f="",r="",p={s:[],d:""},u=0;u<o.length;u++)r+="<em></em>";1==i.isTit&&(f='<p class="title">'+o.eq(0).find("a").attr("title")+"</p>"),l.append('<div class="title-box">'+f+'<span class="circle">'+r+"</span></div>"),t(),e(window).resize(function(){t()}),h==o.length-1&&(o.eq(0).css({position:"relative",left:w*o.length+"px"}),c.css({left:-w*g})),l[0].addEventListener("touchstart",function(e){p.s[0]=e.targetTouches[0].pageX,p.s[1]=e.targetTouches[0].pageY,p.s[2]=(new Date).getTime(),h==o.length-1?o.eq(0).css({position:"relative",left:w*o.length+"px"}):0==h?o.eq(o.length-1).css({position:"relative",left:-o.length*w}):o.css({position:"static"}),clearInterval(d)},!1),l[0].addEventListener("touchmove",function(e){Math.abs(e.targetTouches[0].pageX-p.s[0])>=Math.abs(e.targetTouches[0].pageY-p.s[1])&&""==p.d?p.d=1:""==p.d&&(p.d=0),1==p.d&&(e.preventDefault(),c.css({left:-h*w+e.targetTouches[0].pageX-p.s[0]}))},!1),l[0].addEventListener("touchend",function(e){1!=p.d||c.is(":animated")||(endleft=parseInt(l.css("left")),(new Date).getTime()-p.s[2]>700?s(e.changedTouches[0].pageX-p.s[0]>w/3?"right":p.s[0]-e.changedTouches[0].pageX>w/3?"left":"reset"):e.changedTouches[0].pageX>p.s[0]?s("right"):p.s[0]>e.changedTouches[0].pageX&&s("left")),p.d="",d=setInterval(n,3e3)},!1),d=setInterval(n,3e3),a(i.index)})}}(jQuery);